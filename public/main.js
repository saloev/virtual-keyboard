!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"select",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e.querySelectorAll(t):e.querySelector(t)}},{key:"createElements",value:function(e,t){return e.reduce((function(e,n){var a=n.text,o=n.cssClass,i=n.tag,c=void 0===i?"button":i,s=document.createElement(c);return t.forEach((function(e){s.classList.add(e)})),a&&(a.includes("&")?s.innerHTML=a:s.textContent=a),o&&o.forEach((function(e){s.classList.add(e)})),[].concat(r(e),[s])}),[])}},{key:"appendElements",value:function(e,t){var n=document.createDocumentFragment();t.forEach((function(e){n.appendChild(e)})),e.appendChild(n)}}],(n=null)&&a(t.prototype,n),o&&a(t,o),e}(),i=[["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace"],["Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash"],["CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter"],["ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ArrowUp","ShiftRight"],["ControlLeft","Window","AltLeft","Space","AltRight","ControlRight","ArrowLeft","ArrowDown","ArrowRight"]];function c(e){return function(e){if(Array.isArray(e))return e}(e)||y(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}var h=function(e){var t=e.split("$$$").reduce((function(e,t,n){var r,a=t.split("").reduce((function(e,t){return[].concat(f(e),[{text:t}])}),[]);switch(n){case 0:var o={text:"Backspace",cssClass:["keyboard__backspace"]};r=[].concat(f(a),[o]);break;case 1:var i={text:"Tab",cssClass:["keyboard__tab"]};r=[i].concat(f(a));break;case 2:var c={text:"CapsLock",cssClass:["keyboard__caps-lock"]},s={text:"Enter",cssClass:["keyboard__enter"]};r=[c].concat(f(a),[s]);break;default:var l={text:"Shift",cssClass:["keyboard__shift"]},y={text:"&uarr;"};r=[l].concat(f(a),[y,u({},l,{cssClass:["keyboard__right-shift"]})])}return[].concat(f(e),[r])}),[]);return[].concat(f(t),[[{text:"Ctrl"},{text:"Win"},{text:"Alt"},{text:"Space",cssClass:["keyboard__space"]},{text:"Alt"},{text:"Ctr"},{text:"&larr;"},{text:"&darr;"},{text:"&rarr;"}]]).map((function(e,t){return e.map((function(e,n){var r=e.cssClass;return u({},e,{},{cssClass:r?[].concat(f(r),[i[t][n]]):[i[t][n]]})}))}))},d=function(e){return e.reduce((function(e,t){var n=t.map((function(e){var t=e.text;return t.length>1?e:{text:t.toUpperCase()}}));return[].concat(f(e),[n])}),[])},p=function(e,t){var n=c(e),r=n[0],a=n.slice(1);return[r.map((function(e,n){return t[n]?u({},e,{text:t[n]}):e}))].concat(f(a))},g=h("ё1234567890-=$$$йцукенгшщзхъ\\$$$фывапролджэ$$$ячсмитьбю."),b=h("`1234567890-=$$$qwertyuiop[]\\$$$asdfghjkl;'$$$zxcvbnm,./"),v=d(g),k=d(b),m=p(v,'Ё!"№;%:?*()_+'),x=p(k,"~!@#$%^&*()_+");function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function w(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),S(this,"shiftKeyPressed",(function(){var e="en"===n.currentLanguage?"shiftEN":"shiftRU";n.changeText(e)})),S(this,"keysToUpperCase",(function(){var e="en"===n.currentLanguage?"capsLockEN":"capsLockRU";n.changeText(e)})),S(this,"keyDown",(function(e){var t=e.key,r=e.code,a=e.altKey;"Shift"===t&&a&&n.changeLanguage(),"CapsLock"===r&&n.keysToUpperCase(),"Shift"===t&&n.shiftKeyPressed(),n.activeKey(e);var o=n.keyboard.querySelector(".".concat(r)).innerText;n.insertText(o)})),S(this,"keyUp",(function(e){var t=e.key;n.removeActiveKeys(e),"Shift"!==t&&"CapsLock"!==t||n.changeText()})),S(this,"clickKey",(function(e){var t=e.target;"BUTTON"===t.tagName&&(t.classList.contains("CapsLock")?t.classList.toggle("on")?n.keysToUpperCase():n.changeText():("Shift"===t.textContent&&(n.shiftKeyPressed(),setTimeout((function(){n.changeText()}),200)),n.activeKey({code:t.classList[t.classList.length-1]}),setTimeout((function(){n.removeActiveKeys({code:t.classList[t.classList.length-2]})}),200),n.insertText(t.innerText,!1)))})),S(this,"inputInTextArea",(function(){n.textarea.value=n.text})),this.keyboardSelector=t}var t,n,r;return t=e,(n=[{key:"init",value:function(){this.language("en"),this.text="",this.keyboard=o.select(document.body,this.keyboardSelector),this.keyboardData="en"===this.currentLanguage?b.flat():g.flat(),this.appendKeyboard(),this.keys=o.select(this.keyboard,"button",!0),this.addEvents()}},{key:"language",value:function(e){localStorage.getItem("language")?this.currentLanguage=localStorage.getItem("language"):(localStorage.setItem("language",e),this.currentLanguage=e)}},{key:"appendKeyboard",value:function(){var e=o.createElements(this.keyboardData,["keyboard__key","key"]),t=w(e),n=w(e=o.createElements([{tag:"textarea"}],["keyboard__input","textarea"]));o.appendElements(this.keyboard,[].concat(w(n),w(t)));var r=L(this.keyboard.children,1);this.textarea=r[0]}},{key:"changeText",value:function(e){var t=this,n={en:b.flat(),ru:g.flat(),capsLockRU:v.flat(),capsLockEN:k.flat(),shiftRU:m.flat(),shiftEN:x.flat()};this.currentKeyboardData=e?n[e]:n[this.currentLanguage],this.keys.forEach((function(e,n){var r=e,a=r.textContent,o=t.currentKeyboardData.find((function(e,t){return t===n})).text;o!==a&&(r.innerHTML=o)}))}},{key:"changeLanguage",value:function(){this.currentLanguage="en"===this.currentLanguage?"ru":"en",localStorage.setItem("language",this.currentLanguage),this.changeText()}},{key:"activeKey",value:function(e){var t=e.code;this.keys.forEach((function(e){e.classList.contains("".concat(t))&&e.classList.add("on")}))}},{key:"removeActiveKeys",value:function(e){var t=e.code;this.keys.forEach((function(e){e.classList.contains(t)&&setTimeout((function(){e.classList.remove("on")}),250)}))}},{key:"insertText",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={CapsLock:"",Tab:"\t",Enter:"\n",Shift:"",Ctrl:"",Win:"",Alt:"",Space:" ","←":"","↓":"","↑":"","→":""};switch(e){case"Backspace":var r=this.text.slice(0,-1);this.text=r;break;default:var a=void 0!==n[e]?n[e]:e;this.text=this.text.concat(a)}t&&this.textarea.focus(),this.textarea.value=this.text}},{key:"addEvents",value:function(){document.addEventListener("keydown",this.keyDown),document.addEventListener("keyup",this.keyUp),this.keyboard.addEventListener("click",this.clickKey),this.textarea.addEventListener("input",this.inputInTextArea)}}])&&K(t.prototype,n),r&&K(t,r),e}();window.addEventListener("DOMContentLoaded",(function(){new E(".keyboard").init()}))}]);